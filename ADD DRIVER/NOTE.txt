addEventListeners(nextPageCallback) {
    const nextBtn = document.getElementById("next-btn");
    const profilePictureInput = document.getElementById("profilePicture");
    const profilePicturePreview = document.getElementById("profilePicturePreview");

    // Handle Profile Picture Preview and Upload
    if (profilePictureInput) {
      profilePictureInput.addEventListener("change", async (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            profilePicturePreview.src = e.target.result;
          };
          reader.readAsDataURL(file);

          // Upload the file to the server
          const formData = new FormData();
          formData.append("profilePicture", file);

          try {
            const response = await fetch("http://localhost:5000/api/uploadProfilePicture", {
              method: "POST",
              body: formData,
            });

            const result = await response.json();

            if (response.ok) {
              // Store the uploaded image URL
              this.uploadedProfilePictureUrl = result.imageUrl;
            } else {
              throw new Error(result.error || "Error uploading profile picture");
            }
          } catch (error) {
            console.error("Error uploading profile picture:", error);
            alert("Error uploading profile picture. Please try again.");
          }
        }
      });
    }

    // Handle Next Button Click and Form Submission
    if (nextBtn) {
      nextBtn.addEventListener("click", async (e) => {
        e.preventDefault();

        // Collect form data
        const driverType = document.getElementById("driverType").value;
        const serviceType = document.getElementById("serviceType").value;
        const driverID = document.getElementById("driverID").value;
        const fullName = document.getElementById("fullName").value;
        const phoneNumber = document.getElementById("phoneNumber").value;
        const gender = document.getElementById("gender").value;
        const dob = document.getElementById("dob").value;
        const addressLine1 = document.getElementById("addressLine1").value;
        const addressLine2 = document.getElementById("addressLine2").value;
        const city = document.getElementById("city").value;
        const state = document.getElementById("state").value;
        const country = document.getElementById("country").value;
        const pinCode = document.getElementById("pinCode").value;

        // Use the uploaded profile picture URL
        const profilePicture = this.uploadedProfilePictureUrl || '';

        const data = {
          driverType,
          serviceType,
          driverID,
          fullName,
          phoneNumber,
          gender,
          dob,
          addressLine1,
          addressLine2,
          city,
          state,
          country,
          pinCode,
          profilePictureUrl: profilePicture, // Use the uploaded image URL
        };

        // POST request to save personal details
        try {
          const response = await fetch("http://localhost:5000/api/addPersonalDetails", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data),
          });

          const result = await response.json();

          if (response.ok) {
            alert(result.message);
            nextPageCallback(); // Proceed to the next page
          } else {
            throw new Error(result.error || "Unknown error occurred");
          }
        } catch (error) {
          console.error("Error:", error);
          alert("An error occurred. Please try again.");
        }
      });
    }
  }





  try {
                const response = await fetch("http://localhost:5000/api/addPersonalDetails", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data),
                });

                const result = await response.json();

                if (response.ok) {
                    alert(result.message);
                    nextPageCallback(); // Proceed to the next page
                } else {
                    throw new Error(result.error || "Unknown error occurred");
                }
            } catch (error) {
                console.error("Error:", error);
                alert("An error occurred. Please try again.");
            }